---
trigger: always_on
---

# 语言要求
需要你用中文和user进行沟通以及思考过程的展示

# 当前工作日志.md 更新规范
## 规则一: 在当前内容的基础上进行调整
- 当工作日志需要更新的时候，需要在当前的内容基础上进行增减
- 不可进行推翻式的修改
- 当有大幅度修改时，需要先和user确认修改内容，当User确认可以修改时候再进行大幅度修改

# 文档更新与协作规范

## 规则一：需求变更确认
- 在会话中捕捉到任何需求、功能范围、验收标准或流程的调整时，先暂停实现工作，向 User 复述本次变更。
- 明确询问是否需要写入权威文档（通常位于 `docs/*/*.md`）；只有在用户明确需要后才开始修改。

## 规则二：需求类文档更新流程
1. 通过 `docs/document-map.md` 确认目标文档与章节，必要时在地图中新增条目说明文件用途。
2. 阅读相关章节，定位最合适的段落或编号，避免重复条目或遗漏关联章节。
3. 以项目当前语言风格撰写新增或修改内容，描述预期行为、限制条件和验收口径，必要时引用对话中的关键信息。
4. 保存后快速复核 Markdown 语法、引用跳转与章节层级，确保 AI IDE 后续回合可直接引用。

## 规则三：文档地图同步
- **入口原则**：使用 `docs/document-map.md` 作为知识库入口，优先查阅地图确定涉及的文件与章节。
- **同步维护**：当任何 `docs/*/*.md` 发生结构、内容更新或文件迁移时，必须同步维护 `docs/document-map.md`。
- **操作动作**：新增、修改或删除对应条目，保持文件路径、主题说明与“何时阅读/更新”提示的一致性，保证项目知识结构可追踪。

## 规则四：工作日志更新
- **唯一真实源**：`当前工作日志.md` 是进度的唯一来源，所有任务状态以该文件为准。
- **触发时机**：每当任务规划、执行状态（开始/结束任务）或人工验证结果发生变化时，都要同步更新。
- **格式规范**：
    - 使用 ✅ (已完成) / 🔄 (进行中) / ⏳ (待办/挂起) 标识状态。
    - 必须包含日期、负责人（如适用）、主题和一句话摘要。
    - 按时间顺序记录，必要时附上关联文件或待办提示。

## 规则五：协作准则同步
- 若本次任务影响到协作准则（如 AGENTS、开发规范、测试清单等），沿用确认→更新→复述流程。
- 把更新要点在回复中总结给用户，方便他们写入 PR 描述或同步到其他渠道。

## 规则六：待确认事项记录
- 一旦识别到潜在需要更新但尚未获批的内容，记录在 `当前工作日志.md` 中的待确认事项区域。
- 在后续对话中主动提醒，直到用户明确反馈是否需要落地为止。

## 规则七：开发与交付溯源
- **引用检查**：提交 UI 变更或功能实现前，必须对照 `docs/prd/prd.md` 与 `docs/frontend/frontend_requirements.md` 的具体章节编号。
- **PR 标注**：在 Pull Request (PR) 描述中明确标注引用的文档章节（如 "Ref: PRD Section 4.2"），确保产品、设计和开发三方可快速定位决策背景。
