2025-12-27T13:02:38.7366795Z Current runner version: '2.330.0'
2025-12-27T13:02:38.7398049Z ##[group]Runner Image Provisioner
2025-12-27T13:02:38.7399253Z Hosted Compute Agent
2025-12-27T13:02:38.7400271Z Version: 20251211.462
2025-12-27T13:02:38.7401409Z Commit: 6cbad8c2bb55d58165063d031ccabf57e2d2db61
2025-12-27T13:02:38.7402527Z Build Date: 2025-12-11T16:28:49Z
2025-12-27T13:02:38.7403507Z Worker ID: {c935fb2a-6325-4f63-b8f1-1e14b9944394}
2025-12-27T13:02:38.7404714Z ##[endgroup]
2025-12-27T13:02:38.7405588Z ##[group]Operating System
2025-12-27T13:02:38.7406450Z Ubuntu
2025-12-27T13:02:38.7407269Z 24.04.3
2025-12-27T13:02:38.7408091Z LTS
2025-12-27T13:02:38.7408761Z ##[endgroup]
2025-12-27T13:02:38.7409842Z ##[group]Runner Image
2025-12-27T13:02:38.7410683Z Image: ubuntu-24.04
2025-12-27T13:02:38.7411525Z Version: 20251215.174.1
2025-12-27T13:02:38.7413285Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20251215.174/images/ubuntu/Ubuntu2404-Readme.md
2025-12-27T13:02:38.7415928Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20251215.174
2025-12-27T13:02:38.7417635Z ##[endgroup]
2025-12-27T13:02:38.7419348Z ##[group]GITHUB_TOKEN Permissions
2025-12-27T13:02:38.7422164Z Contents: read
2025-12-27T13:02:38.7422995Z Metadata: read
2025-12-27T13:02:38.7423750Z Packages: read
2025-12-27T13:02:38.7424677Z ##[endgroup]
2025-12-27T13:02:38.7427868Z Secret source: Actions
2025-12-27T13:02:38.7429694Z Prepare workflow directory
2025-12-27T13:02:38.7997981Z Prepare all required actions
2025-12-27T13:02:38.8053145Z Getting action download info
2025-12-27T13:02:39.0615114Z Download action repository 'actions/checkout@v4' (SHA:34e114876b0b11c390a56381ad16ebd13914f8d5)
2025-12-27T13:02:39.1716618Z Download action repository 'actions/setup-go@v5' (SHA:40f1582b2485089dde7abd97c1529aa768e1baff)
2025-12-27T13:02:39.7591669Z Complete job name: Backend CI
2025-12-27T13:02:39.8310749Z ##[group]Run actions/checkout@v4
2025-12-27T13:02:39.8311585Z with:
2025-12-27T13:02:39.8311989Z   repository: layababa/tg_todo
2025-12-27T13:02:39.8312665Z   token: ***
2025-12-27T13:02:39.8313048Z   ssh-strict: true
2025-12-27T13:02:39.8313442Z   ssh-user: git
2025-12-27T13:02:39.8313833Z   persist-credentials: true
2025-12-27T13:02:39.8314270Z   clean: true
2025-12-27T13:02:39.8314666Z   sparse-checkout-cone-mode: true
2025-12-27T13:02:39.8315141Z   fetch-depth: 1
2025-12-27T13:02:39.8315519Z   fetch-tags: false
2025-12-27T13:02:39.8315914Z   show-progress: true
2025-12-27T13:02:39.8316352Z   lfs: false
2025-12-27T13:02:39.8316779Z   submodules: false
2025-12-27T13:02:39.8317232Z   set-safe-directory: true
2025-12-27T13:02:39.8317862Z env:
2025-12-27T13:02:39.8318231Z   GO_VERSION: 1.21.x
2025-12-27T13:02:39.8318635Z   NODE_VERSION: 20.x
2025-12-27T13:02:39.8319032Z ##[endgroup]
2025-12-27T13:02:39.9406743Z Syncing repository: layababa/tg_todo
2025-12-27T13:02:39.9408570Z ##[group]Getting Git version info
2025-12-27T13:02:39.9409276Z Working directory is '/home/runner/work/tg_todo/tg_todo'
2025-12-27T13:02:39.9410655Z [command]/usr/bin/git version
2025-12-27T13:02:39.9468244Z git version 2.52.0
2025-12-27T13:02:39.9494564Z ##[endgroup]
2025-12-27T13:02:39.9508774Z Temporarily overriding HOME='/home/runner/work/_temp/7f8f12db-639d-48b2-8053-35ce8aff23a0' before making global git config changes
2025-12-27T13:02:39.9521678Z Adding repository directory to the temporary git global config as a safe directory
2025-12-27T13:02:39.9522870Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/tg_todo/tg_todo
2025-12-27T13:02:39.9561232Z Deleting the contents of '/home/runner/work/tg_todo/tg_todo'
2025-12-27T13:02:39.9565911Z ##[group]Initializing the repository
2025-12-27T13:02:39.9571335Z [command]/usr/bin/git init /home/runner/work/tg_todo/tg_todo
2025-12-27T13:02:39.9665891Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-12-27T13:02:39.9667104Z hint: will change to "main" in Git 3.0. To configure the initial branch name
2025-12-27T13:02:39.9668374Z hint: to use in all of your new repositories, which will suppress this warning,
2025-12-27T13:02:39.9669906Z hint: call:
2025-12-27T13:02:39.9670565Z hint:
2025-12-27T13:02:39.9671430Z hint: 	git config --global init.defaultBranch <name>
2025-12-27T13:02:39.9672521Z hint:
2025-12-27T13:02:39.9673553Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-12-27T13:02:39.9675179Z hint: 'development'. The just-created branch can be renamed via this command:
2025-12-27T13:02:39.9676513Z hint:
2025-12-27T13:02:39.9677159Z hint: 	git branch -m <name>
2025-12-27T13:02:39.9677897Z hint:
2025-12-27T13:02:39.9678874Z hint: Disable this message with "git config set advice.defaultBranchName false"
2025-12-27T13:02:39.9680807Z Initialized empty Git repository in /home/runner/work/tg_todo/tg_todo/.git/
2025-12-27T13:02:39.9683680Z [command]/usr/bin/git remote add origin https://github.com/layababa/tg_todo
2025-12-27T13:02:39.9717899Z ##[endgroup]
2025-12-27T13:02:39.9719119Z ##[group]Disabling automatic garbage collection
2025-12-27T13:02:39.9723104Z [command]/usr/bin/git config --local gc.auto 0
2025-12-27T13:02:39.9753116Z ##[endgroup]
2025-12-27T13:02:39.9754353Z ##[group]Setting up auth
2025-12-27T13:02:39.9760608Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-12-27T13:02:39.9792221Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-12-27T13:02:40.0142231Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-12-27T13:02:40.0175351Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-12-27T13:02:40.0401678Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2025-12-27T13:02:40.0432377Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2025-12-27T13:02:40.0681296Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-12-27T13:02:40.0712514Z ##[endgroup]
2025-12-27T13:02:40.0713743Z ##[group]Fetching the repository
2025-12-27T13:02:40.0723172Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +0e73f65e55f35ee34d8e45e61d74193e7d5fb105:refs/remotes/origin/main
2025-12-27T13:02:40.7504517Z From https://github.com/layababa/tg_todo
2025-12-27T13:02:40.7508173Z  * [new ref]         0e73f65e55f35ee34d8e45e61d74193e7d5fb105 -> origin/main
2025-12-27T13:02:40.7543736Z ##[endgroup]
2025-12-27T13:02:40.7545618Z ##[group]Determining the checkout info
2025-12-27T13:02:40.7547889Z ##[endgroup]
2025-12-27T13:02:40.7551366Z [command]/usr/bin/git sparse-checkout disable
2025-12-27T13:02:40.7595096Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2025-12-27T13:02:40.7623936Z ##[group]Checking out the ref
2025-12-27T13:02:40.7627077Z [command]/usr/bin/git checkout --progress --force -B main refs/remotes/origin/main
2025-12-27T13:02:40.9406086Z Switched to a new branch 'main'
2025-12-27T13:02:40.9407733Z branch 'main' set up to track 'origin/main'.
2025-12-27T13:02:40.9421793Z ##[endgroup]
2025-12-27T13:02:40.9460316Z [command]/usr/bin/git log -1 --format=%H
2025-12-27T13:02:40.9484277Z 0e73f65e55f35ee34d8e45e61d74193e7d5fb105
2025-12-27T13:02:40.9771816Z ##[group]Run actions/setup-go@v5
2025-12-27T13:02:40.9772904Z with:
2025-12-27T13:02:40.9773673Z   go-version: 1.21.x
2025-12-27T13:02:40.9774555Z   cache: true
2025-12-27T13:02:40.9775452Z   cache-dependency-path: server/go.sum
2025-12-27T13:02:40.9776619Z   check-latest: false
2025-12-27T13:02:40.9777808Z   token: ***
2025-12-27T13:02:40.9778595Z env:
2025-12-27T13:02:40.9779354Z   GO_VERSION: 1.21.x
2025-12-27T13:02:40.9780392Z   NODE_VERSION: 20.x
2025-12-27T13:02:40.9781539Z ##[endgroup]
2025-12-27T13:02:41.1443131Z Setup go version spec 1.21.x
2025-12-27T13:02:41.1516898Z Attempting to download 1.21.x...
2025-12-27T13:02:41.4620593Z matching 1.21.x...
2025-12-27T13:02:41.4665780Z Acquiring 1.21.13 from https://github.com/actions/go-versions/releases/download/1.21.13-10277905115/go-1.21.13-linux-x64.tar.gz
2025-12-27T13:02:41.9604501Z Extracting Go...
2025-12-27T13:02:41.9710583Z [command]/usr/bin/tar xz --warning=no-unknown-keyword --overwrite -C /home/runner/work/_temp/c82787ba-94d6-42bb-9a84-b942e9626e7e -f /home/runner/work/_temp/2268f786-80b3-4a15-bdeb-101843e764c9
2025-12-27T13:02:43.4946476Z Successfully extracted go to /home/runner/work/_temp/c82787ba-94d6-42bb-9a84-b942e9626e7e
2025-12-27T13:02:43.4947251Z Adding to the cache ...
2025-12-27T13:02:49.3904558Z Successfully cached go to /opt/hostedtoolcache/go/1.21.13/x64
2025-12-27T13:02:49.3906670Z Added go to the path
2025-12-27T13:02:49.3910021Z Successfully set up Go version 1.21.x
2025-12-27T13:02:49.4093655Z [command]/opt/hostedtoolcache/go/1.21.13/x64/bin/go env GOMODCACHE
2025-12-27T13:02:49.4124158Z [command]/opt/hostedtoolcache/go/1.21.13/x64/bin/go env GOCACHE
2025-12-27T13:02:49.4160620Z /home/runner/go/pkg/mod
2025-12-27T13:02:49.4170123Z /home/runner/.cache/go-build
2025-12-27T13:02:49.4603822Z Cache is not found
2025-12-27T13:02:49.4623929Z go version go1.21.13 linux/amd64
2025-12-27T13:02:49.4624263Z 
2025-12-27T13:02:49.4624647Z ##[group]go env
2025-12-27T13:02:49.5856590Z GO111MODULE=''
2025-12-27T13:02:49.5857073Z GOARCH='amd64'
2025-12-27T13:02:49.5857405Z GOBIN=''
2025-12-27T13:02:49.5857734Z GOCACHE='/home/runner/.cache/go-build'
2025-12-27T13:02:49.5858177Z GOENV='/home/runner/.config/go/env'
2025-12-27T13:02:49.5858438Z GOEXE=''
2025-12-27T13:02:49.5858625Z GOEXPERIMENT=''
2025-12-27T13:02:49.5858828Z GOFLAGS=''
2025-12-27T13:02:49.5859013Z GOHOSTARCH='amd64'
2025-12-27T13:02:49.5859224Z GOHOSTOS='linux'
2025-12-27T13:02:49.5859706Z GOINSECURE=''
2025-12-27T13:02:49.5860015Z GOMODCACHE='/home/runner/go/pkg/mod'
2025-12-27T13:02:49.5860347Z GONOPROXY=''
2025-12-27T13:02:49.5860548Z GONOSUMDB=''
2025-12-27T13:02:49.5860777Z GOOS='linux'
2025-12-27T13:02:49.5860981Z GOPATH='/home/runner/go'
2025-12-27T13:02:49.5861221Z GOPRIVATE=''
2025-12-27T13:02:49.5861507Z GOPROXY='https://proxy.golang.org,direct'
2025-12-27T13:02:49.5861847Z GOROOT='/opt/hostedtoolcache/go/1.21.13/x64'
2025-12-27T13:02:49.5862141Z GOSUMDB='sum.golang.org'
2025-12-27T13:02:49.5862360Z GOTMPDIR=''
2025-12-27T13:02:49.5862553Z GOTOOLCHAIN='auto'
2025-12-27T13:02:49.5862885Z GOTOOLDIR='/opt/hostedtoolcache/go/1.21.13/x64/pkg/tool/linux_amd64'
2025-12-27T13:02:49.5863252Z GOVCS=''
2025-12-27T13:02:49.5863447Z GOVERSION='go1.21.13'
2025-12-27T13:02:49.5863650Z GCCGO='gccgo'
2025-12-27T13:02:49.5863842Z GOAMD64='v1'
2025-12-27T13:02:49.5864023Z AR='ar'
2025-12-27T13:02:49.5864197Z CC='gcc'
2025-12-27T13:02:49.5864375Z CXX='g++'
2025-12-27T13:02:49.5864555Z CGO_ENABLED='1'
2025-12-27T13:02:49.5864748Z GOMOD='/dev/null'
2025-12-27T13:02:49.5864943Z GOWORK=''
2025-12-27T13:02:49.5865133Z CGO_CFLAGS='-O2 -g'
2025-12-27T13:02:49.5865352Z CGO_CPPFLAGS=''
2025-12-27T13:02:49.5865562Z CGO_CXXFLAGS='-O2 -g'
2025-12-27T13:02:49.5865771Z CGO_FFLAGS='-O2 -g'
2025-12-27T13:02:49.5865973Z CGO_LDFLAGS='-O2 -g'
2025-12-27T13:02:49.5866190Z PKG_CONFIG='pkg-config'
2025-12-27T13:02:49.5866808Z GOGCCFLAGS='-fPIC -m64 -pthread -Wl,--no-gc-sections -fmessage-length=0 -ffile-prefix-map=/tmp/go-build3445153400=/tmp/go-build -gno-record-gcc-switches'
2025-12-27T13:02:49.5867589Z 
2025-12-27T13:02:49.5868113Z ##[endgroup]
2025-12-27T13:02:49.6024281Z ##[group]Run if [ -n "$(gofmt -l .)" ]; then
2025-12-27T13:02:49.6024652Z [36;1mif [ -n "$(gofmt -l .)" ]; then[0m
2025-12-27T13:02:49.6024994Z [36;1m  echo "The following files are not formatted:"[0m
2025-12-27T13:02:49.6025283Z [36;1m  gofmt -l .[0m
2025-12-27T13:02:49.6025475Z [36;1m  exit 1[0m
2025-12-27T13:02:49.6025648Z [36;1mfi[0m
2025-12-27T13:02:49.6064465Z shell: /usr/bin/bash -e {0}
2025-12-27T13:02:49.6064918Z env:
2025-12-27T13:02:49.6065090Z   GO_VERSION: 1.21.x
2025-12-27T13:02:49.6065292Z   NODE_VERSION: 20.x
2025-12-27T13:02:49.6065467Z ##[endgroup]
2025-12-27T13:02:49.6351729Z ##[group]Run go test -v ./...
2025-12-27T13:02:49.6352030Z [36;1mgo test -v ./...[0m
2025-12-27T13:02:49.6385619Z shell: /usr/bin/bash -e {0}
2025-12-27T13:02:49.6385862Z env:
2025-12-27T13:02:49.6386026Z   GO_VERSION: 1.21.x
2025-12-27T13:02:49.6386216Z   NODE_VERSION: 20.x
2025-12-27T13:02:49.6386389Z ##[endgroup]
2025-12-27T13:02:49.6533640Z go: downloading go1.24.10 (linux/amd64)
2025-12-27T13:02:53.6885348Z go: downloading gorm.io/gorm v1.31.1
2025-12-27T13:02:53.6886175Z go: downloading github.com/spf13/viper v1.21.0
2025-12-27T13:02:53.6887763Z go: downloading gorm.io/datatypes v1.2.7
2025-12-27T13:02:53.7286675Z go: downloading github.com/google/uuid v1.6.0
2025-12-27T13:02:53.7318113Z go: downloading github.com/stretchr/testify v1.11.1
2025-12-27T13:02:53.7492342Z go: downloading gorm.io/driver/sqlite v1.6.0
2025-12-27T13:02:53.7538032Z go: downloading github.com/gin-gonic/gin v1.10.0
2025-12-27T13:02:53.7550184Z go: downloading github.com/lib/pq v1.10.9
2025-12-27T13:02:53.7604481Z go: downloading go.uber.org/zap v1.27.1
2025-12-27T13:02:53.7620356Z go: downloading github.com/redis/go-redis/v9 v9.17.0
2025-12-27T13:02:53.7932038Z go: downloading gorm.io/driver/postgres v1.6.0
2025-12-27T13:02:53.8040839Z go: downloading github.com/testcontainers/testcontainers-go v0.40.0
2025-12-27T13:02:53.8160692Z go: downloading github.com/dstotijn/go-notion v0.11.0
2025-12-27T13:02:53.9769299Z go: downloading github.com/robfig/cron/v3 v3.0.1
2025-12-27T13:02:53.9906296Z go: downloading github.com/golang-migrate/migrate/v4 v4.19.0
2025-12-27T13:02:54.0701685Z go: downloading gorm.io/driver/mysql v1.5.6
2025-12-27T13:02:54.0717023Z go: downloading github.com/fsnotify/fsnotify v1.9.0
2025-12-27T13:02:54.0718948Z go: downloading github.com/go-viper/mapstructure/v2 v2.4.0
2025-12-27T13:02:54.0766529Z go: downloading github.com/sagikazarmark/locafero v0.11.0
2025-12-27T13:02:54.0880321Z go: downloading github.com/spf13/afero v1.15.0
2025-12-27T13:02:54.0886154Z go: downloading github.com/spf13/cast v1.10.0
2025-12-27T13:02:54.0988453Z go: downloading github.com/spf13/pflag v1.0.10
2025-12-27T13:02:54.1104270Z go: downloading github.com/jinzhu/now v1.1.5
2025-12-27T13:02:54.1124766Z go: downloading github.com/mattn/go-sqlite3 v1.14.22
2025-12-27T13:02:54.1263434Z go: downloading github.com/jackc/pgx/v5 v5.6.0
2025-12-27T13:02:54.1922453Z go: downloading github.com/davecgh/go-spew v1.1.1
2025-12-27T13:02:54.1924096Z go: downloading github.com/pmezard/go-difflib v1.0.0
2025-12-27T13:02:54.1924757Z go: downloading github.com/stretchr/objx v0.5.2
2025-12-27T13:02:54.2086865Z go: downloading github.com/gin-contrib/sse v1.1.0
2025-12-27T13:02:54.2128139Z go: downloading github.com/mattn/go-isatty v0.0.20
2025-12-27T13:02:54.2137361Z go: downloading golang.org/x/net v0.45.0
2025-12-27T13:02:54.2229610Z go: downloading go.uber.org/multierr v1.10.0
2025-12-27T13:02:54.2353429Z go: downloading github.com/cespare/xxhash/v2 v2.3.0
2025-12-27T13:02:54.2453494Z go: downloading github.com/dgryski/go-rendezvous v0.0.0-20200823014737-9f7001d12a5f
2025-12-27T13:02:54.2539274Z go: downloading github.com/containerd/errdefs v1.0.0
2025-12-27T13:02:54.2630121Z go: downloading github.com/docker/docker v28.5.1+incompatible
2025-12-27T13:02:54.4258546Z go: downloading github.com/docker/go-connections v0.6.0
2025-12-27T13:02:54.4262477Z go: downloading dario.cat/mergo v1.0.2
2025-12-27T13:02:54.4407118Z go: downloading github.com/cenkalti/backoff/v4 v4.3.0
2025-12-27T13:02:54.4432759Z go: downloading github.com/containerd/platforms v0.2.1
2025-12-27T13:02:54.4500002Z go: downloading github.com/cpuguy83/dockercfg v0.3.2
2025-12-27T13:02:54.8481254Z go: downloading github.com/moby/go-archive v0.1.0
2025-12-27T13:02:54.8482189Z go: downloading github.com/moby/term v0.5.0
2025-12-27T13:02:54.8482860Z go: downloading github.com/moby/patternmatcher v0.6.0
2025-12-27T13:02:54.8483535Z go: downloading github.com/opencontainers/image-spec v1.1.1
2025-12-27T13:02:54.8608117Z go: downloading golang.org/x/crypto v0.43.0
2025-12-27T13:02:54.8678183Z go: downloading github.com/hashicorp/go-multierror v1.1.1
2025-12-27T13:02:54.8754008Z go: downloading github.com/jinzhu/inflection v1.0.0
2025-12-27T13:02:54.8783412Z go: downloading golang.org/x/text v0.30.0
2025-12-27T13:02:54.8871644Z go: downloading github.com/sourcegraph/conc v0.3.1-0.20240121214520-5f936abd7ae8
2025-12-27T13:02:54.9076447Z go: downloading golang.org/x/sys v0.37.0
2025-12-27T13:02:55.0435784Z go: downloading github.com/subosito/gotenv v1.6.0
2025-12-27T13:02:55.0540302Z go: downloading github.com/pelletier/go-toml/v2 v2.2.4
2025-12-27T13:02:55.0907762Z go: downloading go.yaml.in/yaml/v3 v3.0.4
2025-12-27T13:02:55.4017123Z go: downloading github.com/jackc/pgpassfile v1.0.0
2025-12-27T13:02:55.4017876Z go: downloading github.com/go-sql-driver/mysql v1.8.1
2025-12-27T13:02:55.4018781Z go: downloading github.com/jackc/pgservicefile v0.0.0-20240606120523-5a60cdf6a761
2025-12-27T13:02:55.4019674Z go: downloading gopkg.in/yaml.v3 v3.0.1
2025-12-27T13:02:55.4093287Z go: downloading github.com/go-playground/validator/v10 v10.27.0
2025-12-27T13:02:55.4123916Z go: downloading github.com/ugorji/go/codec v1.3.0
2025-12-27T13:02:55.4406869Z go: downloading google.golang.org/protobuf v1.36.10
2025-12-27T13:02:55.4457776Z go: downloading github.com/containerd/log v0.1.0
2025-12-27T13:02:55.4583094Z go: downloading github.com/moby/docker-image-spec v1.3.1
2025-12-27T13:02:55.4666307Z go: downloading github.com/opencontainers/go-digest v1.0.0
2025-12-27T13:02:55.4737993Z go: downloading github.com/docker/go-units v0.5.0
2025-12-27T13:02:55.4779790Z go: downloading github.com/morikuni/aec v1.0.0
2025-12-27T13:02:55.4838281Z go: downloading github.com/containerd/errdefs/pkg v0.3.0
2025-12-27T13:02:55.4881948Z go: downloading github.com/distribution/reference v0.6.0
2025-12-27T13:02:55.4940165Z go: downloading github.com/pkg/errors v0.9.1
2025-12-27T13:02:55.4955210Z go: downloading go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp v0.54.0
2025-12-27T13:02:55.5010837Z go: downloading go.opentelemetry.io/otel/trace v1.37.0
2025-12-27T13:02:55.5030765Z go: downloading github.com/magiconair/properties v1.8.10
2025-12-27T13:02:55.5117017Z go: downloading github.com/shirou/gopsutil/v4 v4.25.6
2025-12-27T13:02:55.5160667Z go: downloading go.opentelemetry.io/otel v1.37.0
2025-12-27T13:02:55.5171531Z go: downloading github.com/moby/sys/sequential v0.6.0
2025-12-27T13:02:55.5251471Z go: downloading github.com/moby/sys/user v0.4.0
2025-12-27T13:02:55.5367029Z go: downloading github.com/moby/sys/userns v0.1.0
2025-12-27T13:02:55.5445511Z go: downloading github.com/hashicorp/errwrap v1.1.0
2025-12-27T13:02:55.5612303Z go: downloading github.com/jackc/puddle/v2 v2.2.2
2025-12-27T13:02:55.5750224Z go: downloading filippo.io/edwards25519 v1.1.0
2025-12-27T13:02:55.5809919Z go: downloading github.com/sirupsen/logrus v1.9.3
2025-12-27T13:02:55.5888504Z go: downloading github.com/gabriel-vasile/mimetype v1.4.8
2025-12-27T13:02:55.5997307Z go: downloading github.com/go-playground/universal-translator v0.18.1
2025-12-27T13:02:55.6139974Z go: downloading github.com/leodido/go-urn v1.4.0
2025-12-27T13:02:55.6505398Z go: downloading github.com/felixge/httpsnoop v1.0.4
2025-12-27T13:02:55.7418179Z go: downloading go.opentelemetry.io/otel/metric v1.37.0
2025-12-27T13:02:55.7424228Z go: downloading github.com/klauspost/compress v1.18.0
2025-12-27T13:02:55.7440085Z go: downloading golang.org/x/sync v0.17.0
2025-12-27T13:02:55.7441736Z go: downloading github.com/tklauser/go-sysconf v0.3.12
2025-12-27T13:02:55.7545230Z go: downloading github.com/go-playground/locales v0.14.1
2025-12-27T13:02:55.7563786Z go: downloading github.com/go-logr/logr v1.4.3
2025-12-27T13:02:55.7656526Z go: downloading github.com/tklauser/numcpus v0.6.1
2025-12-27T13:02:55.7792892Z go: downloading github.com/go-logr/stdr v1.2.2
2025-12-27T13:02:55.7804130Z go: downloading go.opentelemetry.io/auto/sdk v1.1.0
2025-12-27T13:03:37.3819621Z ?   	github.com/layababa/tg_todo/server/cmd/api	[no test files]
2025-12-27T13:03:37.3821760Z ?   	github.com/layababa/tg_todo/server/cmd/encrypt_token	[no test files]
2025-12-27T13:03:37.3918293Z === RUN   TestLoadConfigFallsBackToEnv
2025-12-27T13:03:37.3920586Z --- PASS: TestLoadConfigFallsBackToEnv (0.00s)
2025-12-27T13:03:37.3930657Z PASS
2025-12-27T13:03:37.3945705Z ok  	github.com/layababa/tg_todo/server/internal/config	0.006s
2025-12-27T13:03:37.3947741Z ?   	github.com/layababa/tg_todo/server/internal/models	[no test files]
2025-12-27T13:04:14.0432273Z === RUN   TestListByUserFiltersViews
2025-12-27T13:04:14.0433115Z --- PASS: TestListByUserFiltersViews (0.00s)
2025-12-27T13:04:14.0433656Z === RUN   TestSoftDeleteRemovesTask
2025-12-27T13:04:14.0434193Z --- PASS: TestSoftDeleteRemovesTask (0.00s)
2025-12-27T13:04:14.0434650Z PASS
2025-12-27T13:04:14.0435117Z ok  	github.com/layababa/tg_todo/server/internal/repository	0.012s
2025-12-27T13:04:21.2788815Z === RUN   TestGetStatusReturnsUserProfile
2025-12-27T13:04:21.2789682Z --- PASS: TestGetStatusReturnsUserProfile (0.00s)
2025-12-27T13:04:21.2790356Z === RUN   TestGetNotionAuthURLReturnsSignedState
2025-12-27T13:04:21.2791006Z --- PASS: TestGetNotionAuthURLReturnsSignedState (0.00s)
2025-12-27T13:04:21.2791599Z === RUN   TestNotionCallbackPersistsToken
2025-12-27T13:04:21.2792115Z --- PASS: TestNotionCallbackPersistsToken (0.00s)
2025-12-27T13:04:21.2792600Z === RUN   TestNotionCallbackInvalidState
2025-12-27T13:04:21.2793102Z --- PASS: TestNotionCallbackInvalidState (0.00s)
2025-12-27T13:04:21.2793578Z === RUN   TestHMACStateCodecRoundTrip
2025-12-27T13:04:21.2794058Z --- PASS: TestHMACStateCodecRoundTrip (0.00s)
2025-12-27T13:04:21.2794576Z === RUN   TestHMACStateCodecRejectsTamperedState
2025-12-27T13:04:21.2795179Z --- PASS: TestHMACStateCodecRejectsTamperedState (0.00s)
2025-12-27T13:04:21.2795779Z === RUN   TestAuthIntegration_OnboardingFlow
2025-12-27T13:04:21.2796494Z 2025/12/27 13:04:14 github.com/testcontainers/testcontainers-go - Connected to docker: 
2025-12-27T13:04:21.2797203Z   Server Version: 28.0.4
2025-12-27T13:04:21.2797555Z   API Version: 1.48
2025-12-27T13:04:21.2797938Z   Operating System: Ubuntu 24.04.3 LTS
2025-12-27T13:04:21.2798430Z   Total Memory: 15995 MB
2025-12-27T13:04:21.2798914Z   Testcontainers for Go Version: v0.40.0
2025-12-27T13:04:21.2799589Z   Resolved Docker Host: unix:///var/run/docker.sock
2025-12-27T13:04:21.2799990Z   Resolved Docker Socket Path: /var/run/docker.sock
2025-12-27T13:04:21.2800454Z   Test SessionID: 4c34301c83dd13ccaf1ceadd69a52cce0901a44c0250992e2cbf2fa75df11c27
2025-12-27T13:04:21.2800909Z   Test ProcessID: e8102316-68f3-4dc7-bebb-4ea1306a6707
2025-12-27T13:04:21.2801531Z 2025/12/27 13:04:18 🐳 Creating container for image postgres:16-alpine
2025-12-27T13:04:21.2802527Z 2025/12/27 13:04:19 🐳 Creating container for image testcontainers/ryuk:0.13.0
2025-12-27T13:04:21.2803365Z 2025/12/27 13:04:19 ✅ Container created: 9d9b02c96667
2025-12-27T13:04:21.2804160Z 2025/12/27 13:04:19 🐳 Starting container: 9d9b02c96667
2025-12-27T13:04:21.2804843Z 2025/12/27 13:04:19 ✅ Container started: 9d9b02c96667
2025-12-27T13:04:21.2805680Z 2025/12/27 13:04:19 ⏳ Waiting for container id 9d9b02c96667 image: testcontainers/ryuk:0.13.0. Waiting for: port 8080/tcp to be listening
2025-12-27T13:04:21.2806219Z 2025/12/27 13:04:19 Shell not found in container
2025-12-27T13:04:21.2806570Z 2025/12/27 13:04:19 🔔 Container is ready: 9d9b02c96667
2025-12-27T13:04:21.2806918Z 2025/12/27 13:04:19 ✅ Container created: 245e70112fcc
2025-12-27T13:04:21.2807274Z 2025/12/27 13:04:19 🐳 Starting container: 245e70112fcc
2025-12-27T13:04:21.2807617Z 2025/12/27 13:04:19 ✅ Container started: 245e70112fcc
2025-12-27T13:04:21.2808220Z 2025/12/27 13:04:19 ⏳ Waiting for container id 245e70112fcc image: postgres:16-alpine. Waiting for: port 5432/tcp to be listening
2025-12-27T13:04:21.2808769Z 2025/12/27 13:04:20 🔔 Container is ready: 245e70112fcc
2025-12-27T13:04:21.2808953Z 
2025-12-27T13:04:21.2810235Z 2025/12/27 13:04:21 [31;1m/home/runner/work/tg_todo/tg_todo/server/internal/repository/user_repository.go:36 [35;1mrecord not found
2025-12-27T13:04:21.2811336Z [0m[33m[3.168ms] [34;1m[rows:0][0m SELECT * FROM "users" WHERE tg_id = 68123456 AND "users"."deleted_at" IS NULL ORDER BY "users"."id" LIMIT 1
2025-12-27T13:04:21.2811934Z 2025/12/27 13:04:21 🐳 Stopping container: 245e70112fcc
2025-12-27T13:04:21.2812288Z 2025/12/27 13:04:21 ✅ Container stopped: 245e70112fcc
2025-12-27T13:04:21.2812657Z 2025/12/27 13:04:21 🐳 Terminating container: 245e70112fcc
2025-12-27T13:04:21.2813029Z 2025/12/27 13:04:21 🚫 Container terminated: 245e70112fcc
2025-12-27T13:04:21.2813355Z --- PASS: TestAuthIntegration_OnboardingFlow (7.22s)
2025-12-27T13:04:21.2813619Z PASS
2025-12-27T13:04:21.2813928Z ok  	github.com/layababa/tg_todo/server/internal/server/http/handlers/auth	7.247s
2025-12-27T13:04:21.2814307Z === RUN   TestListGroupsHandler
2025-12-27T13:04:21.2814551Z --- PASS: TestListGroupsHandler (0.00s)
2025-12-27T13:04:21.2814826Z === RUN   TestBindGroupForbidden
2025-12-27T13:04:21.2815072Z --- PASS: TestBindGroupForbidden (0.00s)
2025-12-27T13:04:21.2815304Z PASS
2025-12-27T13:04:21.2815607Z ok  	github.com/layababa/tg_todo/server/internal/server/http/handlers/group	0.009s
2025-12-27T13:04:21.2816009Z === RUN   TestHandlerReturnsVersionAndGitHash
2025-12-27T13:04:21.2816417Z [GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
2025-12-27T13:04:21.2816816Z  - using env:	export GIN_MODE=release
2025-12-27T13:04:21.2817100Z  - using code:	gin.SetMode(gin.ReleaseMode)
2025-12-27T13:04:21.2817279Z 
2025-12-27T13:04:21.2817710Z [GIN-debug] GET    /healthz                  --> github.com/layababa/tg_todo/server/internal/server/http/handlers/healthz.(*Handler).Handle-fm (1 handlers)
2025-12-27T13:04:21.2818324Z --- PASS: TestHandlerReturnsVersionAndGitHash (0.00s)
2025-12-27T13:04:21.2818598Z PASS
2025-12-27T13:04:21.2818912Z ok  	github.com/layababa/tg_todo/server/internal/server/http/handlers/healthz	0.006s
2025-12-27T13:04:21.2819305Z === RUN   TestListDatabasesHandler
2025-12-27T13:04:21.2819768Z --- PASS: TestListDatabasesHandler (0.00s)
2025-12-27T13:04:21.2820052Z === RUN   TestValidateDatabaseHandler
2025-12-27T13:04:21.2820323Z --- PASS: TestValidateDatabaseHandler (0.00s)
2025-12-27T13:04:21.2820566Z PASS
2025-12-27T13:04:21.2820861Z ok  	github.com/layababa/tg_todo/server/internal/server/http/handlers/notion	0.010s
2025-12-27T13:04:21.2821307Z === RUN   TestListTasksHandler
2025-12-27T13:04:21.2821583Z --- PASS: TestListTasksHandler (0.00s)
2025-12-27T13:04:21.2821827Z === RUN   TestGetTaskNotFound
2025-12-27T13:04:21.2822060Z --- PASS: TestGetTaskNotFound (0.00s)
2025-12-27T13:04:21.2822301Z === RUN   TestDeleteTaskFailure
2025-12-27T13:04:21.2822539Z --- PASS: TestDeleteTaskFailure (0.00s)
2025-12-27T13:04:21.2822761Z PASS
2025-12-27T13:04:21.2823051Z ok  	github.com/layababa/tg_todo/server/internal/server/http/handlers/task	0.031s
2025-12-27T13:04:21.2823441Z === RUN   TestHandleWebhook_MyChatMember_Added
2025-12-27T13:04:21.2823838Z [GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
2025-12-27T13:04:21.2824232Z  - using env:	export GIN_MODE=release
2025-12-27T13:04:21.2824496Z  - using code:	gin.SetMode(gin.ReleaseMode)
2025-12-27T13:04:21.2824673Z 
2025-12-27T13:04:21.2825410Z     logger.go:146: 2025-12-27T13:04:15.243Z	DEBUG	buildWebAppMarkup called	{"webAppURL": "", "buttonText": "⚙️ 高级设置", "startParam": "bind_200", "generatedURL": ""}
2025-12-27T13:04:21.2826223Z     logger.go:146: 2025-12-27T13:04:15.243Z	WARN	buildWebAppMarkup returning nil because URL is empty
2025-12-27T13:04:21.2826901Z     logger.go:146: 2025-12-27T13:04:15.243Z	DEBUG	sendMessage called	{"chatID": 200, "hasMarkup": true}
2025-12-27T13:04:21.2828134Z [DEBUG] Telegram API sendMessage request: {"chat_id":200,"text":"👋 欢迎使用 Telegram To-Do 助手！\n\n📝 **如何创建任务**\n• 在群内 @ + 文本\n• 回复消息 + @\n• 使用 @ 提及成员可指派任务\n\n💡 输入 /help 查看更多功能","parse_mode":"HTML","reply_markup":null}
2025-12-27T13:04:21.2828927Z --- PASS: TestHandleWebhook_MyChatMember_Added (0.00s)
2025-12-27T13:04:21.2829235Z === RUN   TestHandleWebhook_Command_Start
2025-12-27T13:04:21.2830155Z [GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
2025-12-27T13:04:21.2830571Z  - using env:	export GIN_MODE=release
2025-12-27T13:04:21.2830849Z  - using code:	gin.SetMode(gin.ReleaseMode)
2025-12-27T13:04:21.2831028Z 
2025-12-27T13:04:21.2831741Z     logger.go:146: 2025-12-27T13:04:15.246Z	DEBUG	buildWebAppMarkup called	{"webAppURL": "", "buttonText": "打开 Mini App", "startParam": "", "generatedURL": ""}
2025-12-27T13:04:21.2832560Z     logger.go:146: 2025-12-27T13:04:15.246Z	WARN	buildWebAppMarkup returning nil because URL is empty
2025-12-27T13:04:21.2833234Z     logger.go:146: 2025-12-27T13:04:15.246Z	DEBUG	sendMessage called	{"chatID": 300, "hasMarkup": true}
2025-12-27T13:04:21.2834354Z [DEBUG] Telegram API sendMessage request: {"chat_id":300,"text":"👋 欢迎使用 Telegram To-Do 助手！\n\n• 直接输入 /todo 或引用消息即可把任务保存到内置数据库\n• 随时打开 Mini App 管理我的待办、群组与设置\n• 需要同步 Notion 时再进入设置绑定即可\n• 输入 /help 查看所有指令与操作示例","parse_mode":"HTML","reply_markup":null}
2025-12-27T13:04:21.2835298Z     logger.go:146: 2025-12-27T13:04:15.247Z	DEBUG	sendMessage called	{"chatID": 300, "hasMarkup": true}
2025-12-27T13:04:21.2836543Z [DEBUG] Telegram API sendMessage request: {"chat_id":300,"text":"⚡️ 快捷操作：\n• 点 /todo 直接创建任务\n• 点 /settings 设置默认数据库\n• 点 /help 查看全部指令","parse_mode":"HTML","reply_markup":{"keyboard":[[{"text":"/todo"},{"text":"/settings"}],[{"text":"/help"},{"text":"/close"}]],"resize_keyboard":true,"one_time_keyboard":false}}
2025-12-27T13:04:21.2837444Z --- PASS: TestHandleWebhook_Command_Start (0.00s)
2025-12-27T13:04:21.2837731Z === RUN   TestShouldCreateTask
2025-12-27T13:04:21.2838031Z === RUN   TestShouldCreateTask/群聊中_@Bot_应该创建任务
2025-12-27T13:04:21.2838368Z === RUN   TestShouldCreateTask/群聊中回复消息且包含@应该创建任务
2025-12-27T13:04:21.2838684Z === RUN   TestShouldCreateTask/私聊不应该创建任务
2025-12-27T13:04:21.2839004Z === RUN   TestShouldCreateTask/群聊中普通消息不应该创建任务
2025-12-27T13:04:21.2839327Z === RUN   TestShouldCreateTask/空消息不应该创建任务
2025-12-27T13:04:21.2839904Z --- PASS: TestShouldCreateTask (0.00s)
2025-12-27T13:04:21.2840323Z     --- PASS: TestShouldCreateTask/群聊中_@Bot_应该创建任务 (0.00s)
2025-12-27T13:04:21.2840760Z     --- PASS: TestShouldCreateTask/群聊中回复消息且包含@应该创建任务 (0.00s)
2025-12-27T13:04:21.2841166Z     --- PASS: TestShouldCreateTask/私聊不应该创建任务 (0.00s)
2025-12-27T13:04:21.2841568Z     --- PASS: TestShouldCreateTask/群聊中普通消息不应该创建任务 (0.00s)
2025-12-27T13:04:21.2841963Z     --- PASS: TestShouldCreateTask/空消息不应该创建任务 (0.00s)
2025-12-27T13:04:21.2842203Z PASS
2025-12-27T13:04:21.2842523Z ok  	github.com/layababa/tg_todo/server/internal/server/http/handlers/telegram	0.016s
2025-12-27T13:04:21.2843074Z ?   	github.com/layababa/tg_todo/server/internal/server/http/handlers/user	[no test files]
2025-12-27T13:04:21.2843495Z === RUN   TestTelegramAuth_ValidInitData_NewUser
2025-12-27T13:04:21.2843972Z     auth_test.go:101: Requires valid Telegram signature - covered in integration tests
2025-12-27T13:04:21.2844397Z --- SKIP: TestTelegramAuth_ValidInitData_NewUser (0.00s)
2025-12-27T13:04:21.2844711Z === RUN   TestTelegramAuth_MissingInitData
2025-12-27T13:04:21.2844996Z --- PASS: TestTelegramAuth_MissingInitData (0.00s)
2025-12-27T13:04:21.2845282Z === RUN   TestTelegramAuth_ExistingUser
2025-12-27T13:04:21.2845555Z --- PASS: TestTelegramAuth_ExistingUser (0.00s)
2025-12-27T13:04:21.2845814Z === RUN   TestBuildUserName
2025-12-27T13:04:21.2846048Z === RUN   TestBuildUserName/First_and_Last_name
2025-12-27T13:04:21.2846315Z === RUN   TestBuildUserName/First_name_only
2025-12-27T13:04:21.2846580Z === RUN   TestBuildUserName/Username_only
2025-12-27T13:04:21.2846844Z === RUN   TestBuildUserName/Fallback_to_User
2025-12-27T13:04:21.2847106Z --- PASS: TestBuildUserName (0.00s)
2025-12-27T13:04:21.2847435Z     --- PASS: TestBuildUserName/First_and_Last_name (0.00s)
2025-12-27T13:04:21.2847805Z     --- PASS: TestBuildUserName/First_name_only (0.00s)
2025-12-27T13:04:21.2848308Z     --- PASS: TestBuildUserName/Username_only (0.00s)
2025-12-27T13:04:21.2848657Z     --- PASS: TestBuildUserName/Fallback_to_User (0.00s)
2025-12-27T13:04:21.2849047Z === RUN   TestGetUserFromContext
2025-12-27T13:04:21.2849318Z === RUN   TestGetUserFromContext/user_exists_in_context
2025-12-27T13:04:21.2849896Z === RUN   TestGetUserFromContext/user_does_not_exist_in_context
2025-12-27T13:04:21.2850249Z === RUN   TestGetUserFromContext/wrong_type_in_context
2025-12-27T13:04:21.2850548Z --- PASS: TestGetUserFromContext (0.00s)
2025-12-27T13:04:21.2850936Z     --- PASS: TestGetUserFromContext/user_exists_in_context (0.00s)
2025-12-27T13:04:21.2851415Z     --- PASS: TestGetUserFromContext/user_does_not_exist_in_context (0.00s)
2025-12-27T13:04:21.2851889Z     --- PASS: TestGetUserFromContext/wrong_type_in_context (0.00s)
2025-12-27T13:04:21.2852211Z === RUN   TestTelegramAuth_DatabaseError
2025-12-27T13:04:21.2852490Z --- PASS: TestTelegramAuth_DatabaseError (0.00s)
2025-12-27T13:04:21.2852788Z === RUN   TestTelegramAuth_UserCreationError
2025-12-27T13:04:21.2853083Z --- PASS: TestTelegramAuth_UserCreationError (0.00s)
2025-12-27T13:04:21.2853402Z === RUN   TestRecoveryMiddlewareReturnsJSONError
2025-12-27T13:04:21.2862777Z     logger.go:146: 2025-12-27T13:04:15.966Z	ERROR	Panic recovered	{"error": "boom", "request_id": "req-123", "stack": "github.com/layababa/tg_todo/server/internal/server/http/middleware_test.TestRecoveryMiddlewareReturnsJSONError.Recovery.func3.1\n\t/home/runner/work/tg_todo/tg_todo/server/internal/server/http/middleware/recovery.go:22\nruntime.gopanic\n\t/home/runner/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.10.linux-amd64/src/runtime/panic.go:792\ngithub.com/layababa/tg_todo/server/internal/server/http/middleware_test.TestRecoveryMiddlewareReturnsJSONError.func1\n\t/home/runner/work/tg_todo/tg_todo/server/internal/server/http/middleware/recovery_test.go:24\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/home/runner/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/layababa/tg_todo/server/internal/server/http/middleware_test.TestRecoveryMiddlewareReturnsJSONError.Recovery.func3\n\t/home/runner/work/tg_todo/tg_todo/server/internal/server/http/middleware/recovery.go:43\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/home/runner/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/layababa/tg_todo/server/internal/server/http/middleware_test.TestRecoveryMiddlewareReturnsJSONError.RequestID.func2\n\t/home/runner/work/tg_todo/tg_todo/server/internal/server/http/middleware/request_id.go:18\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/home/runner/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/home/runner/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/home/runner/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\ngithub.com/layababa/tg_todo/server/internal/server/http/middleware_test.TestRecoveryMiddlewareReturnsJSONError\n\t/home/runner/work/tg_todo/tg_todo/server/internal/server/http/middleware/recovery_test.go:31\ntesting.tRunner\n\t/home/runner/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.10.linux-amd64/src/testing/testing.go:1792"}
2025-12-27T13:04:21.2870074Z --- PASS: TestRecoveryMiddlewareReturnsJSONError (0.00s)
2025-12-27T13:04:21.2870357Z PASS
2025-12-27T13:04:21.2870650Z ok  	github.com/layababa/tg_todo/server/internal/server/http/middleware	0.008s
2025-12-27T13:04:21.2871013Z === RUN   TestBindDatabase_Success
2025-12-27T13:04:21.2871268Z --- PASS: TestBindDatabase_Success (0.00s)
2025-12-27T13:04:21.2871535Z === RUN   TestBindDatabase_NotAdmin
2025-12-27T13:04:21.2871787Z --- PASS: TestBindDatabase_NotAdmin (0.00s)
2025-12-27T13:04:21.2872054Z === RUN   TestListGroups_ReturnsSummaries
2025-12-27T13:04:21.2872334Z --- PASS: TestListGroups_ReturnsSummaries (0.00s)
2025-12-27T13:04:21.2872622Z === RUN   TestValidateDatabase_ChecksAdmin
2025-12-27T13:04:21.2872902Z --- PASS: TestValidateDatabase_ChecksAdmin (0.00s)
2025-12-27T13:04:21.2873329Z === RUN   TestInitDatabase_RequiresAdmin
2025-12-27T13:04:21.2873608Z --- PASS: TestInitDatabase_RequiresAdmin (0.00s)
2025-12-27T13:04:21.2873946Z PASS
2025-12-27T13:04:21.2874210Z ok  	github.com/layababa/tg_todo/server/internal/service/group	0.007s
2025-12-27T13:04:21.2874677Z ?   	github.com/layababa/tg_todo/server/internal/service/notification	[no test files]
2025-12-27T13:04:21.2875061Z === RUN   TestListDatabases
2025-12-27T13:04:21.2875279Z --- PASS: TestListDatabases (0.00s)
2025-12-27T13:04:21.2875527Z === RUN   TestValidateDatabase_Valid
2025-12-27T13:04:21.2875783Z --- PASS: TestValidateDatabase_Valid (0.00s)
2025-12-27T13:04:21.2876065Z === RUN   TestValidateDatabase_Invalid
2025-12-27T13:04:21.2876332Z --- PASS: TestValidateDatabase_Invalid (0.00s)
2025-12-27T13:04:21.2876607Z === RUN   TestInitializeDatabase_NoMissing
2025-12-27T13:04:21.2876894Z --- PASS: TestInitializeDatabase_NoMissing (0.00s)
2025-12-27T13:04:21.2877189Z === RUN   TestInitializeDatabase_CreatesMissing
2025-12-27T13:04:21.2877509Z --- PASS: TestInitializeDatabase_CreatesMissing (0.00s)
2025-12-27T13:04:21.2877766Z PASS
2025-12-27T13:04:21.2878025Z ok  	github.com/layababa/tg_todo/server/internal/service/notion	0.006s
2025-12-27T13:04:21.2878464Z ?   	github.com/layababa/tg_todo/server/internal/service/poller	[no test files]
2025-12-27T13:04:21.2878949Z ?   	github.com/layababa/tg_todo/server/internal/service/scheduler	[no test files]
2025-12-27T13:04:21.2879369Z === RUN   TestCreatorCreateTaskAddsCreatorAndMentions
2025-12-27T13:04:21.2879923Z === PAUSE TestCreatorCreateTaskAddsCreatorAndMentions
2025-12-27T13:04:21.2880268Z === RUN   TestCreatorCreateTaskIgnoresUnknownMentions
2025-12-27T13:04:21.2880595Z === PAUSE TestCreatorCreateTaskIgnoresUnknownMentions
2025-12-27T13:04:21.2880955Z === RUN   TestCreatorCreateTaskFailsWhenCreatorLookupFails
2025-12-27T13:04:21.2881337Z === PAUSE TestCreatorCreateTaskFailsWhenCreatorLookupFails
2025-12-27T13:04:21.2881710Z === RUN   TestParseCommandRemovesTodoPrefixAndMentions
2025-12-27T13:04:21.2882067Z === PAUSE TestParseCommandRemovesTodoPrefixAndMentions
2025-12-27T13:04:21.2882393Z === RUN   TestListTasksDelegatesToRepository
2025-12-27T13:04:21.2882707Z --- PASS: TestListTasksDelegatesToRepository (0.00s)
2025-12-27T13:04:21.2883006Z === RUN   TestGetTaskUsesRepository
2025-12-27T13:04:21.2883271Z --- PASS: TestGetTaskUsesRepository (0.00s)
2025-12-27T13:04:21.2883547Z === RUN   TestDeleteTaskChecksExistence
2025-12-27T13:04:21.2883830Z --- PASS: TestDeleteTaskChecksExistence (0.00s)
2025-12-27T13:04:21.2884109Z === RUN   TestDeleteTaskWhenMissing
2025-12-27T13:04:21.2884364Z --- PASS: TestDeleteTaskWhenMissing (0.00s)
2025-12-27T13:04:21.2884625Z === RUN   TestSyncToNotion_Create
2025-12-27T13:04:21.2884869Z --- PASS: TestSyncToNotion_Create (0.00s)
2025-12-27T13:04:21.2885123Z === RUN   TestSyncToNotion_Update
2025-12-27T13:04:21.2885359Z --- PASS: TestSyncToNotion_Update (0.00s)
2025-12-27T13:04:21.2885639Z === RUN   TestSyncTaskFromNotion_DeletesArchived
2025-12-27T13:04:21.2885966Z --- PASS: TestSyncTaskFromNotion_DeletesArchived (0.00s)
2025-12-27T13:04:21.2886316Z === RUN   TestSyncTaskFromNotion_IgnoresUnknownArchived
2025-12-27T13:04:21.2886685Z --- PASS: TestSyncTaskFromNotion_IgnoresUnknownArchived (0.00s)
2025-12-27T13:04:21.2887088Z === CONT  TestCreatorCreateTaskAddsCreatorAndMentions
2025-12-27T13:04:21.2887462Z --- PASS: TestCreatorCreateTaskAddsCreatorAndMentions (0.00s)
2025-12-27T13:04:21.2887862Z === CONT  TestParseCommandRemovesTodoPrefixAndMentions
2025-12-27T13:04:21.2888246Z --- PASS: TestParseCommandRemovesTodoPrefixAndMentions (0.00s)
2025-12-27T13:04:21.2888652Z === CONT  TestCreatorCreateTaskFailsWhenCreatorLookupFails
2025-12-27T13:04:21.2889070Z --- PASS: TestCreatorCreateTaskFailsWhenCreatorLookupFails (0.00s)
2025-12-27T13:04:21.2889768Z === CONT  TestCreatorCreateTaskIgnoresUnknownMentions
2025-12-27T13:04:21.2890323Z --- PASS: TestCreatorCreateTaskIgnoresUnknownMentions (0.00s)
2025-12-27T13:04:21.2890627Z PASS
2025-12-27T13:04:21.2891065Z ok  	github.com/layababa/tg_todo/server/internal/service/task	0.007s
2025-12-27T13:04:21.2891624Z ?   	github.com/layababa/tg_todo/server/internal/service/telegram	[no test files]
2025-12-27T13:04:21.2892014Z === RUN   TestRunReturnsErrorWhenDBNil
2025-12-27T13:04:21.2892295Z --- PASS: TestRunReturnsErrorWhenDBNil (0.00s)
2025-12-27T13:04:21.2892576Z === RUN   TestEmbeddedFilesAvailable
2025-12-27T13:04:21.2892845Z --- PASS: TestEmbeddedFilesAvailable (0.00s)
2025-12-27T13:04:21.2893078Z PASS
2025-12-27T13:04:21.2893302Z ok  	github.com/layababa/tg_todo/server/migrations	0.004s
2025-12-27T13:04:21.2893591Z === RUN   TestEncryptDecrypt
2025-12-27T13:04:21.2893826Z === RUN   TestEncryptDecrypt/simple_text
2025-12-27T13:04:21.2894086Z === RUN   TestEncryptDecrypt/notion_token
2025-12-27T13:04:21.2894345Z === RUN   TestEncryptDecrypt/long_text
2025-12-27T13:04:21.2894596Z === RUN   TestEncryptDecrypt/unicode_text
2025-12-27T13:04:21.2894855Z === RUN   TestEncryptDecrypt/empty_string
2025-12-27T13:04:21.2895118Z --- PASS: TestEncryptDecrypt (0.00s)
2025-12-27T13:04:21.2895433Z     --- PASS: TestEncryptDecrypt/simple_text (0.00s)
2025-12-27T13:04:21.2895795Z     --- PASS: TestEncryptDecrypt/notion_token (0.00s)
2025-12-27T13:04:21.2896135Z     --- PASS: TestEncryptDecrypt/long_text (0.00s)
2025-12-27T13:04:21.2896479Z     --- PASS: TestEncryptDecrypt/unicode_text (0.00s)
2025-12-27T13:04:21.2896814Z     --- PASS: TestEncryptDecrypt/empty_string (0.00s)
2025-12-27T13:04:21.2897093Z === RUN   TestEncrypt_DifferentKeys
2025-12-27T13:04:21.2897344Z --- PASS: TestEncrypt_DifferentKeys (0.00s)
2025-12-27T13:04:21.2897608Z === RUN   TestEncrypt_InvalidKey
2025-12-27T13:04:21.2897855Z === RUN   TestEncrypt_InvalidKey/too_short_key
2025-12-27T13:04:21.2898127Z === RUN   TestEncrypt_InvalidKey/too_long_key
2025-12-27T13:04:21.2898404Z === RUN   TestEncrypt_InvalidKey/invalid_base64
2025-12-27T13:04:21.2898670Z --- PASS: TestEncrypt_InvalidKey (0.00s)
2025-12-27T13:04:21.2899011Z     --- PASS: TestEncrypt_InvalidKey/too_short_key (0.00s)
2025-12-27T13:04:21.2899643Z     --- PASS: TestEncrypt_InvalidKey/too_long_key (0.00s)
2025-12-27T13:04:21.2900056Z     --- PASS: TestEncrypt_InvalidKey/invalid_base64 (0.00s)
2025-12-27T13:04:21.2900360Z === RUN   TestDecrypt_InvalidCiphertext
2025-12-27T13:04:21.2900644Z === RUN   TestDecrypt_InvalidCiphertext/invalid_base64
2025-12-27T13:04:21.2900980Z === RUN   TestDecrypt_InvalidCiphertext/too_short_ciphertext
2025-12-27T13:04:21.2901324Z === RUN   TestDecrypt_InvalidCiphertext/corrupted_ciphertext
2025-12-27T13:04:21.2901649Z === RUN   TestDecrypt_InvalidCiphertext/empty_string
2025-12-27T13:04:21.2901945Z --- PASS: TestDecrypt_InvalidCiphertext (0.00s)
2025-12-27T13:04:21.2902337Z     --- PASS: TestDecrypt_InvalidCiphertext/invalid_base64 (0.00s)
2025-12-27T13:04:21.2902791Z     --- PASS: TestDecrypt_InvalidCiphertext/too_short_ciphertext (0.00s)
2025-12-27T13:04:21.2903264Z     --- PASS: TestDecrypt_InvalidCiphertext/corrupted_ciphertext (0.00s)
2025-12-27T13:04:21.2903712Z     --- PASS: TestDecrypt_InvalidCiphertext/empty_string (0.00s)
2025-12-27T13:04:21.2904022Z === RUN   TestEncrypt_Determinism
2025-12-27T13:04:21.2904270Z --- PASS: TestEncrypt_Determinism (0.00s)
2025-12-27T13:04:21.2904513Z === RUN   TestGenerateKey
2025-12-27T13:04:21.2904729Z --- PASS: TestGenerateKey (0.00s)
2025-12-27T13:04:21.2904928Z PASS
2025-12-27T13:04:21.2905150Z ok  	github.com/layababa/tg_todo/server/pkg/crypto	0.003s
2025-12-27T13:04:21.2905504Z ?   	github.com/layababa/tg_todo/server/pkg/db	[no test files]
2025-12-27T13:04:21.2905803Z === RUN   TestGenerateAuthURL
2025-12-27T13:04:21.2906036Z --- PASS: TestGenerateAuthURL (0.00s)
2025-12-27T13:04:21.2906282Z === RUN   TestExchangeCode_Success
2025-12-27T13:04:21.2906533Z --- PASS: TestExchangeCode_Success (0.14s)
2025-12-27T13:04:21.2906797Z === RUN   TestExchangeCode_ParseResponse
2025-12-27T13:04:21.2907076Z --- PASS: TestExchangeCode_ParseResponse (0.00s)
2025-12-27T13:04:21.2907339Z === RUN   TestOAuthConfig
2025-12-27T13:04:21.2907685Z --- PASS: TestOAuthConfig (0.00s)
2025-12-27T13:04:21.2907890Z PASS
2025-12-27T13:04:21.2908100Z ok  	github.com/layababa/tg_todo/server/pkg/notion	0.149s
2025-12-27T13:04:21.2908562Z ?   	github.com/layababa/tg_todo/server/pkg/redis	[no test files]
2025-12-27T13:04:21.2908956Z ?   	github.com/layababa/tg_todo/server/pkg/security	[no test files]
2025-12-27T13:04:21.2909277Z === RUN   TestParseInitData
2025-12-27T13:04:21.2909832Z === RUN   TestParseInitData/valid_init_data_with_user
2025-12-27T13:04:21.2910172Z === RUN   TestParseInitData/valid_init_data_with_start_param
2025-12-27T13:04:21.2910486Z === RUN   TestParseInitData/invalid_URL_encoding
2025-12-27T13:04:21.2910772Z === RUN   TestParseInitData/invalid_auth_date
2025-12-27T13:04:21.2911048Z === RUN   TestParseInitData/invalid_user_JSON
2025-12-27T13:04:21.2911309Z --- PASS: TestParseInitData (0.00s)
2025-12-27T13:04:21.2911669Z     --- PASS: TestParseInitData/valid_init_data_with_user (0.00s)
2025-12-27T13:04:21.2912112Z     --- PASS: TestParseInitData/valid_init_data_with_start_param (0.00s)
2025-12-27T13:04:21.2912545Z     --- PASS: TestParseInitData/invalid_URL_encoding (0.00s)
2025-12-27T13:04:21.2912915Z     --- PASS: TestParseInitData/invalid_auth_date (0.00s)
2025-12-27T13:04:21.2913289Z     --- PASS: TestParseInitData/invalid_user_JSON (0.00s)
2025-12-27T13:04:21.2913565Z === RUN   TestInitData_Validate
2025-12-27T13:04:21.2913803Z === RUN   TestInitData_Validate/missing_hash
2025-12-27T13:04:21.2914086Z === RUN   TestInitData_Validate/invalid_signature
2025-12-27T13:04:21.2914370Z === RUN   TestInitData_Validate/valid_signature
2025-12-27T13:04:21.2914641Z --- PASS: TestInitData_Validate (0.00s)
2025-12-27T13:04:21.2914967Z     --- PASS: TestInitData_Validate/missing_hash (0.00s)
2025-12-27T13:04:21.2915342Z     --- PASS: TestInitData_Validate/invalid_signature (0.00s)
2025-12-27T13:04:21.2915718Z     --- PASS: TestInitData_Validate/valid_signature (0.00s)
2025-12-27T13:04:21.2916007Z === RUN   TestInitData_IsExpired
2025-12-27T13:04:21.2916283Z === RUN   TestInitData_IsExpired/not_expired_-_recent
2025-12-27T13:04:21.2916583Z === RUN   TestInitData_IsExpired/expired_-_old
2025-12-27T13:04:21.2916894Z === RUN   TestInitData_IsExpired/expired_-_zero_auth_date
2025-12-27T13:04:21.2917245Z === RUN   TestInitData_IsExpired/not_expired_-_just_under_threshold
2025-12-27T13:04:21.2917580Z --- PASS: TestInitData_IsExpired (0.00s)
2025-12-27T13:04:21.2917941Z     --- PASS: TestInitData_IsExpired/not_expired_-_recent (0.00s)
2025-12-27T13:04:21.2918337Z     --- PASS: TestInitData_IsExpired/expired_-_old (0.00s)
2025-12-27T13:04:21.2918754Z     --- PASS: TestInitData_IsExpired/expired_-_zero_auth_date (0.00s)
2025-12-27T13:04:21.2919232Z     --- PASS: TestInitData_IsExpired/not_expired_-_just_under_threshold (0.00s)
2025-12-27T13:04:21.2919846Z === RUN   TestBuildDataCheckString
2025-12-27T13:04:21.2920119Z === RUN   TestBuildDataCheckString/simple_sorted
2025-12-27T13:04:21.2920422Z === RUN   TestBuildDataCheckString/hash_is_excluded
2025-12-27T13:04:21.2920730Z === RUN   TestBuildDataCheckString/single_parameter
2025-12-27T13:04:21.2921026Z --- PASS: TestBuildDataCheckString (0.00s)
2025-12-27T13:04:21.2921398Z     --- PASS: TestBuildDataCheckString/simple_sorted (0.00s)
2025-12-27T13:04:21.2921804Z     --- PASS: TestBuildDataCheckString/hash_is_excluded (0.00s)
2025-12-27T13:04:21.2922217Z     --- PASS: TestBuildDataCheckString/single_parameter (0.00s)
2025-12-27T13:04:21.2922519Z === RUN   TestComputeSecretKey
2025-12-27T13:04:21.2922758Z --- PASS: TestComputeSecretKey (0.00s)
2025-12-27T13:04:21.2922999Z === RUN   TestComputeHash
2025-12-27T13:04:21.2923216Z --- PASS: TestComputeHash (0.00s)
2025-12-27T13:04:21.2923422Z PASS
2025-12-27T13:04:21.2923663Z ok  	github.com/layababa/tg_todo/server/pkg/telegramauth	0.003s
2025-12-27T13:04:21.4576186Z ##[group]Run go build -v -o /dev/null ./cmd/api
2025-12-27T13:04:21.4576540Z [36;1mgo build -v -o /dev/null ./cmd/api[0m
2025-12-27T13:04:21.4608462Z shell: /usr/bin/bash -e {0}
2025-12-27T13:04:21.4608677Z env:
2025-12-27T13:04:21.4609003Z   GO_VERSION: 1.21.x
2025-12-27T13:04:21.4609182Z   NODE_VERSION: 20.x
2025-12-27T13:04:21.4609357Z ##[endgroup]
2025-12-27T13:04:21.7539337Z github.com/layababa/tg_todo/server/cmd/api
2025-12-27T13:04:23.0347426Z ##[group]Run go build -v -o /dev/null ./cmd/bot
2025-12-27T13:04:23.0347764Z [36;1mgo build -v -o /dev/null ./cmd/bot[0m
2025-12-27T13:04:23.0380210Z shell: /usr/bin/bash -e {0}
2025-12-27T13:04:23.0380431Z env:
2025-12-27T13:04:23.0380587Z   GO_VERSION: 1.21.x
2025-12-27T13:04:23.0380771Z   NODE_VERSION: 20.x
2025-12-27T13:04:23.0380937Z ##[endgroup]
2025-12-27T13:04:23.0503052Z stat /home/runner/work/tg_todo/tg_todo/server/cmd/bot: directory not found
2025-12-27T13:04:23.0520564Z ##[error]Process completed with exit code 1.
2025-12-27T13:04:23.0614335Z Post job cleanup.
2025-12-27T13:04:23.1578762Z [command]/usr/bin/git version
2025-12-27T13:04:23.1616349Z git version 2.52.0
2025-12-27T13:04:23.1660455Z Temporarily overriding HOME='/home/runner/work/_temp/a3538823-1b81-486e-afba-a361e2e9d28d' before making global git config changes
2025-12-27T13:04:23.1661463Z Adding repository directory to the temporary git global config as a safe directory
2025-12-27T13:04:23.1666382Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/tg_todo/tg_todo
2025-12-27T13:04:23.1704049Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-12-27T13:04:23.1739047Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-12-27T13:04:23.1972699Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-12-27T13:04:23.1994509Z http.https://github.com/.extraheader
2025-12-27T13:04:23.2007341Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-12-27T13:04:23.2038137Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-12-27T13:04:23.2264062Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2025-12-27T13:04:23.2294866Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2025-12-27T13:04:23.2653925Z Cleaning up orphan processes
